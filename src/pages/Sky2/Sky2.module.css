/* 화면 전체 배경 */
.sky {
    position: fixed;
    inset: 0;
    z-index: -1;
    overflow: hidden;
    pointer-events: none;
}
.gradient {
    position: absolute;
    inset: 0;
    background: linear-gradient(#0a1526 0%, #122643 45%, #1a2f4f 70%, #243552 100%);
}

/* 별/별자리 */
.starsLayer,
.constellationsLayer {
    position: absolute;
    inset: 0;
}
.constellationsLayer {
    pointer-events: none;
} /* 그룹은 배경 */

.star {
    position: absolute;
    border-radius: 50%;
    background: radial-gradient(ellipse at center, #ffd7a8 0%, #ffc670 35%, #ff9b3d 60%, rgba(255, 153, 61, 0) 70%);
    box-shadow: 0 0 6px 2px rgba(255, 200, 120, 0.7), 0 0 16px 6px rgba(255, 160, 70, 0.25);
    filter: saturate(1.1);
    transform: translate(-50%, -50%);
    animation: twinkle 2.6s linear infinite, drift var(--drift-duration, 10s) ease-in-out infinite;
    pointer-events: auto;
    will-change: transform, opacity, filter;
}
@keyframes twinkle {
    0%,
    100% {
        opacity: 0.9;
        filter: brightness(1);
    }
    50% {
        opacity: 0.45;
        filter: brightness(1.25);
    }
}
@keyframes drift {
    0%,
    100% {
        transform: translate(-50%, calc(-50% - var(--drift-amplitude, 6px)));
    }
    50% {
        transform: translate(-50%, calc(-50% + var(--drift-amplitude, 6px)));
    }
}

/* 별자리 이동 */
.constellation {
    position: absolute;
    width: 0;
    height: 0;
    transform: translate(-50%, -50%);
    animation: constellationMove var(--const-move-duration, 120s) linear infinite;
    animation-delay: var(--const-move-delay, 0s);
    pointer-events: auto;
}
@keyframes constellationMove {
    0% {
        transform: translate(calc(-50% - 60vw), -50%);
    }
    100% {
        transform: translate(calc(-50% + 60vw), -50%);
    }
}

/* 툴팁 */
.tooltip {
    position: absolute;
    transform: translate(-50%, calc(-100% - 12px));
    background: rgba(12, 18, 32, 0.9);
    color: #ffdcae;
    border: 1px solid rgba(255, 206, 150, 0.3);
    padding: 8px 10px;
    border-radius: 8px;
    font-size: 12px;
    line-height: 1.3;
    white-space: nowrap;
    pointer-events: none;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.35);
}
.constTooltip {
    max-width: 240px;
    text-align: left;
}

/* ============ 구름 ============ */
/* 공통: 오른쪽 이동 + 흔들림(상하+스케일) 통합 키프레임
   - 0%: 왼쪽 화면 밖(-110vw)에서 시작
   - 100%: 오른쪽 화면 밖(+110vw)로 종료 → 다음 loop에서 다시 -110vw로 점프 */

.cloud {
    position: absolute;
    width: 500vw;
    background-repeat: repeat-x;
    background-size: auto 100%;
    pointer-events: none;
    will-change: transform;
    --run-duration: 60s;
    --delay: 0s;
    --start-top: 70%;
    --height: 60vh;
    --opacity: 0.8;
    --wobble-amp: 4px;
    --wobble-scale: 0.012;

    top: var(--start-top);
    left: 0;
    height: var(--height);
    opacity: var(--opacity);

    /* 두 개 동시에: X는 cloudRun, Y/scale은 cloudBob */
    animation: cloudRun var(--run-duration) linear var(--delay) infinite, cloudBob 6s ease-in-out 0s infinite; /* 주기 6s는 필요 시 개별 구름에서 변경 가능 */
}
/* 이동+흔들림 통합: 좌→우 진행, 상하/스케일 변조 */
@keyframes cloudRun {
    0% {
        transform: translateX(-110vw) translateY(calc(var(--wobble-amp) * -0.5)) scale(1);
    }
    20% {
        transform: translateX(-70vw) translateY(calc(var(--wobble-amp) * 0.7)) scale(calc(1 + var(--wobble-scale)));
    }
    40% {
        transform: translateX(-30vw) translateY(calc(var(--wobble-amp) * -0.9))
            scale(calc(1 - var(--wobble-scale) * 0.5));
    }
    60% {
        transform: translateX(10vw) translateY(calc(var(--wobble-amp) * 0.6)) scale(calc(1 + var(--wobble-scale) * 0.6));
    }
    80% {
        transform: translateX(50vw) translateY(calc(var(--wobble-amp) * -0.4))
            scale(calc(1 - var(--wobble-scale) * 0.3));
    }
    100% {
        transform: translateX(110vw) translateY(calc(var(--wobble-amp) * -0.5)) scale(1);
    }
}

/* 개별 구름: 이미지/위치/속도/지연 */
.cloud1 {
    background-image: url('../../assets/cloud1.png');
    --start-top: 72%;
    --height: 78vh;
    --opacity: 0.75;
    --run-duration: 110s;
    --wobble-amp: 5px;
}
.cloud2 {
    background-image: url('../../assets/cloud2.png');
    --start-top: 58%;
    --height: 70vh;
    --opacity: 0.8;
    --run-duration: 80s;
    --wobble-amp: 4px;
}
.cloud3 {
    background-image: url('../../assets/cloud3.png');
    --start-top: 62%;
    --height: 64vh;
    --opacity: 0.6;
    --run-duration: 55s;
    --wobble-amp: 4px;
}
.cloud4 {
    background-image: url('../../assets/cloud4.png');
    --start-top: 78%;
    --height: 82vh;
    --opacity: 0.78;
    --run-duration: 140s;
    --wobble-amp: 5px;
}
.cloud5 {
    background-image: url('../../assets/cloud1.png');
    --start-top: 84%;
    --height: 72vh;
    --opacity: 0.82;
    --run-duration: 95s;
    --wobble-amp: 4px;
}
.cloud6 {
    background-image: url('../../assets/cloud2.png');
    --start-top: 66%;
    --height: 68vh;
    --opacity: 0.7;
    --run-duration: 130s;
    --wobble-amp: 5px;
}
.cloud7 {
    background-image: url('../../assets/cloud3.png');
    --start-top: 60%;
    --height: 60vh;
    --opacity: 0.62;
    --run-duration: 50s;
    --wobble-amp: 4px;
}
.cloud8 {
    background-image: url('../../assets/cloud4.png');
    --start-top: 56%;
    --height: 56vh;
    --opacity: 0.6;
    --run-duration: 40s;
    --wobble-amp: 4px;
}

/* 반응형 */
@media (max-width: 768px) {
    .tooltip {
        font-size: 11px;
    }
    .cloud {
        height: 38vh;
    }
}
